var log = require('./log').build("common");
function currentTimeMs(){
    return Date.now ();
};

exports.currentTimeMs = currentTimeMs;

function sleep(ms){
    return new Promise((resolve) => {
        setTimeout(resolve, ms);
      });
}

exports.sleep = function(ms){
     sleep(ms);
}

exports.busywait = function(loop){
    while(loop-- > 0);
}

exports.toBase64 = function(str){
    log.d(`base64 ${str}`);
    // TODO: check str
    return Buffer.from(str).toString('base64');
}

/**
 * Convert base64 string to string
 * @param {*} base64str 
 */
exports.fromBase64 = function(base64str){
    log.d(`frombase64 ${base64str}`);
    return Buffer.from(base64str, 'base64').toString('utf-8');
}