////////////////////////////////////////////////////////////////////
// MODULE LOADING
////////////////////////////////////////////////////////////////////

var ERR = require("../../errno");
var TAGS = require("../../controller/tags_ctrl");
const { markets } = require("../../model/market");
var IMPORT_CTRL = require("../../controller/cve_import_ctrl");


////////////////////////////////////////////////////////////////////
// GLOBAL VARIABLES
////////////////////////////////////////////////////////////////////

var log = require("../../log").build("importlist");


////////////////////////////////////////////////////////////////////
// FUNCTION
////////////////////////////////////////////////////////////////////

function handleReq(req, res, next){
    log.d("handleReq");
    
    res.render('admin_importlist');
    
}

function handlePost(req, res, next){
    log.d("handlePost");
    
    IMPORT_CTRL.getList(function(err, data){
        log.d("getList callback");
        if (err == ERR.ErrNone){
            res.json({
                items:data
            });
        }
        else{
            var retMsg = `Get import List faied ${data}`;
            log.e(retMsg);
            APP.responseMsg(res, err, retMsg);
        }
    });
}

////////////////////////////////////////////////////////////////////
// MODULE EXPORT
////////////////////////////////////////////////////////////////////

module.exports.handleReq = handleReq;
module.exports.handlePost = handlePost;
module.exports.ROUTE_NAME = "importlist";
